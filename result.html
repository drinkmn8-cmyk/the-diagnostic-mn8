<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MN8 Diagnostic — Results</title>

  <!-- LATO -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#000;
      --card:#0f0f14;
      --hair:rgba(255,255,255,.08);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --accent:#632f96;
      --radius:34px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      min-height:100vh;
      background:
        radial-gradient(900px 520px at 50% 0%, rgba(99,47,150,.45), rgba(99,47,150,0) 62%),
        radial-gradient(760px 420px at 50% 18%, rgba(99,47,150,.18), rgba(99,47,150,0) 70%),
        var(--bg);
      background-attachment:fixed;
      color:var(--text);
      font-family:"Lato",system-ui,-apple-system,Segoe UI,Roboto,Arial;
      display:grid;
      place-items:center;
      padding:28px 18px;
    }

    .wrap{
      width:100%;
      max-width:1200px;
      display:grid;
      gap:22px;
    }

    .grid{
      display:grid;
      gap:22px;
      grid-template-columns: 1.1fr .65fr;
      grid-auto-rows: minmax(160px, auto);
      align-items:stretch;
    }

    .card{
      background:rgba(15,15,20,.92);
      border:1px solid var(--hair);
      border-radius:var(--radius);
      box-shadow:0 34px 160px rgba(0,0,0,.72);
      padding:28px 30px;
    }

    .title{
      font-size:20px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:rgba(185,145,235,.85);
      font-weight:700;
      margin:0 0 14px 0;
    }

    .body{
      margin:0;
      color:var(--text);
      font-size:18px;
      line-height:1.55;
      white-space:pre-wrap;
    }

    .muted{
      color:var(--muted);
      font-size:13px;
      margin-top:10px;
      white-space:pre-wrap;
    }

    .core{ grid-column:1 / 2; grid-row:1 / 2; }
    .closing{ grid-column:2 / 3; grid-row:1 / 2; }
    .consequence{ grid-column:1 / 2; grid-row:2 / 3; }
    .mechanism{ grid-column:1 / 2; grid-row:3 / 4; }

    .footer{
      display:flex;
      justify-content:flex-end;
      margin-top:6px;
    }

    .btn{
      appearance:none;
      border:0;
      cursor:pointer;
      min-width:260px;
      height:54px;
      border-radius:20px;
      background:rgba(106,56,163,1);
      color:rgba(10,10,14,.92);
      font-size:18px;
      font-weight:800;
      transition:opacity .12s ease, transform .08s ease;
    }
    .btn:hover{opacity:.92}
    .btn:active{transform:translateY(1px)}

    @media (max-width:980px){
      .grid{ grid-template-columns:1fr; }
      .core,.closing,.consequence,.mechanism{ grid-column:auto; grid-row:auto; }
      .footer{ justify-content:stretch; }
      .btn{ width:100%; min-width:0; }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="grid">

      <div class="card core">
        <h2 class="title">Core Diagnosis</h2>
        <p class="body" id="coreText">
          <!-- default fallback copy (will be replaced) -->
          Your responses point to a clear pattern. Progress didn’t fade gradually — it stopped after a break. Since then, starting has felt heavier than it used to.
        </p>
      </div>

      <div class="card closing">
        <h2 class="title">Closing Insight</h2>
        <p class="body" id="closingText">
          This didn’t fail because you lacked discipline. It failed because nothing was holding execution in place. Until structure is installed, effort will always feel optional.
        </p>
      </div>

      <div class="card consequence">
        <h2 class="title">Consequence</h2>
        <p class="body" id="consequenceText">
          Right now, execution depends on how you feel. When energy drops or doubt shows up, nothing locks the action in. Each restart without structure makes the next pause come sooner.
        </p>
      </div>

      <div class="card mechanism">
        <h2 class="title">Hidden Mechanism</h2>
        <p class="body" id="mechanismText">
          When that break happened, your system adapted. It learned to slow you down before commitment, not during effort. This isn’t hesitation — it’s protection against another restart that doesn’t last.
        </p>
      </div>

    </section>

    <div class="footer">
      <button class="btn" id="continueBtn">Continue</button>
    </div>

    <div class="muted" id="debugLine" style="display:none;"></div>
  </main>

  <script>
    const SUMMARY_KEY = "mn8_summary";      // MUST match what reviewing.html saves
    const NEXT_PAGE = "index.html";         // change this to whatever “Continue” should do

    function safeParse(raw) {
      try { return JSON.parse(raw); } catch { return null; }
    }

    window.addEventListener("DOMContentLoaded", () => {
      const coreEl = document.getElementById("coreText");
      const mechEl = document.getElementById("mechanismText");
      const consEl = document.getElementById("consequenceText");
      const closeEl = document.getElementById("closingText");
      const debug = document.getElementById("debugLine");

      const raw = localStorage.getItem(SUMMARY_KEY);
      const summary = raw ? safeParse(raw) : null;

      // If mn8_summary is missing or invalid, KEEP defaults (don’t break the page)
      if (summary && typeof summary === "object") {
        if (summary.core) coreEl.textContent = String(summary.core).trim();
        if (summary.mechanism) mechEl.textContent = String(summary.mechanism).trim();
        if (summary.consequence) consEl.textContent = String(summary.consequence).trim();
        if (summary.closing) closeEl.textContent = String(summary.closing).trim();
      } else {
        // Optional: turn this on if you want to see why it didn't update
        // debug.style.display = "block";
        // debug.textContent = "No mn8_summary found. Run: localStorage.getItem('mn8_summary')";
      }

      document.getElementById("continueBtn").addEventListener("click", () => {
        window.location.href = NEXT_PAGE;
      });
    });
  </script>
</body>
</html>
