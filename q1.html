<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Diagnostic — Q1</title>
    <link rel="stylesheet" href="assets/style.css?v=999" />
  </head>

  <body>
    <main class="wrap">
      <section class="card qCard" role="region" aria-label="Diagnostic Question 1">
        <form id="q1Form" class="qForm" novalidate>
          <!-- ONE line only. No essay. -->
          <h1 class="qPrompt">What changed the most?</h1>

          <!-- Apple-style selection rows -->
          <div class="qList" role="radiogroup" aria-label="Question 1">
            <button type="button" class="qRow" data-value="consistency" aria-checked="false">
              <span class="qLabel">I’m not consistent anymore — even when I know what to do.</span>
              <span class="qCheck" aria-hidden="true"></span>
            </button>

            <button type="button" class="qRow" data-value="confidence" aria-checked="false">
              <span class="qLabel">I don’t trust myself to follow through.</span>
              <span class="qCheck" aria-hidden="true"></span>
            </button>

            <button type="button" class="qRow" data-value="mental" aria-checked="false">
              <span class="qLabel">Moving forward takes more mental effort than it used to.</span>
              <span class="qCheck" aria-hidden="true"></span>
            </button>

            <button type="button" class="qRow" data-value="identity" aria-checked="false">
              <span class="qLabel">I don’t fully recognize who I am anymore.</span>
              <span class="qCheck" aria-hidden="true"></span>
            </button>

            <button type="button" class="qRow" data-value="other" aria-checked="false">
              <span class="qLabel">Other</span>
              <span class="qCheck" aria-hidden="true"></span>
            </button>
          </div>

          <div class="qActions">
            <button type="button" class="ghost" id="backBtn">Back</button>
            <button type="submit" class="btn" id="continueBtn" disabled>Continue</button>
          </div>
        </form>
      </section>
    </main>

    <script>
      const rows = Array.from(document.querySelectorAll(".qRow"));
      const continueBtn = document.getElementById("continueBtn");
      const backBtn = document.getElementById("backBtn");
      const form = document.getElementById("q1Form");

      let selected = null;

      function setSelected(btn) {
        rows.forEach((r) => {
          r.classList.remove("isOn");
          r.setAttribute("aria-checked", "false");
        });
        btn.classList.add("isOn");
        btn.setAttribute("aria-checked", "true");
        selected = btn.dataset.value;
        continueBtn.disabled = false;
      }

      rows.forEach((btn) => {
        btn.addEventListener("click", () => setSelected(btn));
      });

      backBtn.addEventListener("click", () => history.back());

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (!selected) return;
        localStorage.setItem("mn8_q1", selected);
        window.location.href = "q2.html";
      });
    </script>
  </body>
</html>
